---
title: "Усовершенствования подсистемы PowerShell в WMF 5.1 (предварительная версия)"
ms.date: 2016-07-13
keywords: PowerShell, DSC, WMF
description: 
ms.topic: article
author: keithb
manager: dongill
ms.prod: powershell
ms.technology: WMF
translationtype: Human Translation
ms.sourcegitcommit: 57049ff138604b0e13c8fd949ae14da05cb03a4b
ms.openlocfilehash: 0e876b291075458a089c8a550bcee84b6e06b393

---

#Усовершенствования подсистемы PowerShell

В WMF 5.1 были реализованы перечисленные ниже улучшения основной подсистемы PowerShell.


## Производительность ##

Производительность улучшена в некоторых важных аспектах:

- Запуск
- Передача данных по конвейеру в такие командлеты, как ForEach-Object и Where-Object, выполняется примерно на 50 % быстрее. 

Примеры некоторых улучшений (результаты могут различаться в зависимости от оборудования): 

| Сценарий | Время в версии 5.0 (мс) | Время в версии 5.1 (мс) |
| -------- | :---------------: | :---------------: |
| `powershell -command "echo 1"` | 900 | 250 |
| Самый первый запуск PowerShell: `powershell -command "Unknown-Command"` | 30 000 | 13 000 |
| Построение кэша анализа команд: `powershell -command "Unknown-Command"` | 7000 | 520 |
| `1..1000000 | % { }` | 1400 | 750 |
  
> [!NOTE]  
> Одно из изменений, связанных с запуском, может повлиять на некоторые неподдерживаемые сценарии. PowerShell больше не считывает файлы `$pshome\*.ps1xml` — эти файлы были преобразованы в C# во избежание накладных расходов, связанных с обработкой XML-файлов. Эти файлы по-прежнему существуют для поддержки параллельно установленной версии 2, поэтому изменение их содержимого сказывается только на версии 2, но не на версии 5. Обратите внимание на то, что изменение содержимого этих файлов никогда не поддерживалось.

Еще одним явным изменением является то, как PowerShell кэширует экспортируемые команды и другую информацию для модулей, установленных в системе. Ранее этот кэш хранился в каталоге `$env:LOCALAPPDATA\Microsoft\Windows\PowerShell\CommandAnalysis`. В WMF 5.1 этот кэш является отдельным файлом `$env:LOCALAPPDATA\Microsoft\Windows\PowerShell\ModuleAnalysisCache`.
Подробные сведения см. в разделе, посвященном файлу [analysis_cache.md]().


<!--HONumber=Jul16_HO3-->


