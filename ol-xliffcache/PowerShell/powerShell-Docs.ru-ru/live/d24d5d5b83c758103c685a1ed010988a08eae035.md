# Указание межузловых зависимостей

Встроенные ресурсы WaitFor\* (WaitForAll, WaitForAny и WaitForSome) позволяют указать зависимости между компьютерами во время выполнения конфигурации без внешней оркестрации. Поведение каждого ресурса WaitFor\* имеет следующий вид:

* **WaitForAll**: ожидает, пока указанный ресурс не примет нужное состояние на *всех* целевых узлах, определенных в свойстве NodeName.
* **WaitForAny**: ожидает, пока указанный ресурс не примет нужное состояние на *любом* целевом узле, определенном в свойстве NodeName.
* **WaitForSome**: ожидает, пока указанный ресурс не примет нужное состояние на таком числе целевых узлов, определенных в свойстве NodeName, которое задано в свойстве NodeCount.

Эти ресурсы обеспечивают синхронизацию между узлами с помощью CIM-подключений по протоколу WS-Man. С их помощью конфигурация может ожидать изменения состояния определенного ресурса на другом компьютере, прежде чем продолжить собственное выполнение. 

Например, в следующей конфигурации целевой узел ожидает выполнения ресурса **xADDomain** на узле **MyDC** с несколькими повторными попытками, прежде чем присоединиться к домену.

```PowerShell
Configuration JoinDomain

{
    Import-DscResource -Module xComputerManagement

    WaitForAll DC
    {
        ResourceName      = '[xADDomain]NewDomain'
        NodeName          = 'MyDC'
        RetryIntervalSec  = 15
        RetryCount        = 30
    }

    xComputer JoinDomain
    {
        Name             = 'MyPC'
        DomainName       = 'Contoso.com'
        Credential       = (get-credential)
        DependsOn        ='[WaitForAll]DC'
    }
}
```
**Совет.** По умолчанию ресурсы WaitFor\* выполняют одну повторную попытку и завершаются со сбоем. Поэтому хотя это и необязательно, обычно требуется указать интервал и число повторов.
<!--HONumber=Mar16_HO2-->
