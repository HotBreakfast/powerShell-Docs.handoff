{
  "nodes": [
    {
      "content": "MOF Documents Are Encrypted By Default",
      "pos": [
        2,
        40
      ]
    },
    {
      "content": "Configuration documents contain sensitive information.",
      "pos": [
        42,
        96
      ]
    },
    {
      "content": "In previous versions of DSC you were required to distribute and manage certificates in order to secure credentials within a configuration.",
      "pos": [
        97,
        235
      ]
    },
    {
      "content": "For many, this was a significant management burden and even with all of the work it took to do this you were still left with some configuration information that was not and could not be secured.",
      "pos": [
        236,
        430
      ]
    },
    {
      "content": "That is no longer the case because <bpt id=\"p1\">**</bpt>all configuration MOFs are secured by default<ept id=\"p1\">**</ept>.",
      "pos": [
        433,
        518
      ]
    },
    {
      "content": "No certificates or meta-configuration settings are needed.",
      "pos": [
        519,
        577
      ]
    },
    {
      "content": "Any time a configuration MOF is saved to disk by the Local Configuration Manager (LCM) on a target node, it is encrypted.",
      "pos": [
        578,
        699
      ]
    },
    {
      "content": "The MOFs are encrypted using <bpt id=\"p1\">[</bpt>DPAPI<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/ms995355.aspx)</ept>.",
      "pos": [
        700,
        793
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> MOFs generated by a configuration script are not encrypted.",
      "pos": [
        794,
        863
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Example:<ept id=\"p1\">**</ept> Encryption in push mode",
      "pos": [
        865,
        901
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>MOF Encryption<ph id=\"ph2\">](images/MOF_Encryption.jpg)</ph>",
      "pos": [
        902,
        946
      ]
    },
    {
      "content": "If you are already using the certificate method for encrypting passwords or if you need additional security for your passwords, the <bpt id=\"p1\">[</bpt>existing method of certificate based encryption<ept id=\"p1\">](https://msdn.microsoft.com/en-us/powershell/dsc/securemof)</ept> will continue to work.",
      "pos": [
        948,
        1211
      ]
    },
    {
      "content": "The result will be a MOF document that is fully encrypted using the DPAPIs and additionally have passwords encrypted within it.",
      "pos": [
        1212,
        1339
      ]
    },
    {
      "content": "This encryption only applies to configuration MOF documents (pending.mof, current.mof, previous.mof and partial MOFs).",
      "pos": [
        1341,
        1459
      ]
    },
    {
      "content": "Meta-configuration MOFs are still saved in plain text since they less likely contain secrets.",
      "pos": [
        1460,
        1553
      ]
    }
  ],
  "content": "# MOF Documents Are Encrypted By Default\n\nConfiguration documents contain sensitive information. In previous versions of DSC you were required to distribute and manage certificates in order to secure credentials within a configuration. For many, this was a significant management burden and even with all of the work it took to do this you were still left with some configuration information that was not and could not be secured. \n\nThat is no longer the case because **all configuration MOFs are secured by default**. No certificates or meta-configuration settings are needed. Any time a configuration MOF is saved to disk by the Local Configuration Manager (LCM) on a target node, it is encrypted. The MOFs are encrypted using [DPAPI](https://msdn.microsoft.com/en-us/library/ms995355.aspx). **Note:** MOFs generated by a configuration script are not encrypted.\n\n**Example:** Encryption in push mode\n![MOF Encryption](images/MOF_Encryption.jpg)\n\nIf you are already using the certificate method for encrypting passwords or if you need additional security for your passwords, the [existing method of certificate based encryption](https://msdn.microsoft.com/en-us/powershell/dsc/securemof) will continue to work. The result will be a MOF document that is fully encrypted using the DPAPIs and additionally have passwords encrypted within it.\n\nThis encryption only applies to configuration MOF documents (pending.mof, current.mof, previous.mof and partial MOFs). Meta-configuration MOFs are still saved in plain text since they less likely contain secrets.\n"
}